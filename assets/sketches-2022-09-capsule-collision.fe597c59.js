var y=Object.defineProperty;var f=(e,o,t)=>o in e?y(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var p=(e,o,t)=>(f(e,typeof o!="symbol"?o+"":o,t),t);import"./index.7a991a0b.js";import{i as w,a as x,t as P,r as S,p as d,m as g,e as h,B as b,P as T,V as C,S as D,b as R,g as V,s as v,c as A,d as B}from"./Replay.c9641c9b.js";import{p as I,a as O,b as k,A as M,V as u,c as i,P as l}from"./PositionIndex.ce0183fb.js";import{b as j,c as q,a as F,d as U,C as m,B as Y,e as z}from"./Bouncer.0116962f.js";async function E(){const e=w(),o=x();e.debug=!0;const t=new P.exports.Pane,s=t.addFolder({title:document.title,expanded:!0});e.addToPane(s);const n={historyPeriod:0,maxHistory:60*10,updateDelta:1e3/60};S(s,e,n),r.spawn(e,{Position:{x:-175,y:0,r:Math.PI/4},Velocity:{x:10,r:Math.PI*.125},AreaCapsule:{radius:50,length:500},SpriteOptions:{color:16724787}}),r.spawn(e,{Position:{x:175,y:0,r:0},Velocity:{x:-10,r:0-Math.PI*.125},AreaCapsule:{radius:50,length:500},SpriteOptions:{color:3355647}}),e.run(d(h([[r]]),I(),g(),q(),j({separationFactor:.1}),R(n),G({pane:t})),d(A(),v([[r,H]]),V()),o,d(K(),O(),F(),z())),Object.assign(window,{world:e,positionIndexService:k,collisionService:U,Collidable:m}),console.log("READY.")}const G=({pane:e})=>o=>(e.refresh(),o);class r extends b{update(){}}p(r,"components",{Position:T,Velocity:C,AreaCapsule:M,SpriteOptions:D,Collidable:m,Bounce:Y}),p(r,"componentProxyClasses",{Position:u,Velocity:u}),p(r,"defaults",{SpriteOptions:{scaleX:1,scaleY:1,lineWidth:2,color:16777215},Velocity:{x:0,y:0},Bounce:{mass:10}});class H extends B{draw(o,t){super.draw(o,t);const{g:s}=this,{AreaCapsule:{radius:n,length:c}}=t,a=c/2-n;s.moveTo(0-n/2,0).lineTo(n/2,0),s.moveTo(0,0-a).lineTo(0,a),s.moveTo(0-n,0-a).lineTo(0-n,a),s.moveTo(n,0-a).lineTo(n,a),s.drawCircle(0,0-a,n),s.drawCircle(0,a,n)}}const K=(e={})=>{new r,new r;const o=new Set;new i,new i,new i,new i,new i,new l,new l,new l,new l;const t=(s,n)=>[s,n].sort().join(":");return s=>{if(!(!s||!s.debug)){s.debugGraphics,o.clear();for(const n of r.query(s))for(const c of r.query(s)){if(n==c)continue;const a=t(n,c);o.has(a)||o.add(a)}return s}}};E().catch(console.error);

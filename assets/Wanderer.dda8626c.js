import{f as l,j as y,T as t,P as c,V as h,G as s,q as x}from"./Replay.c9641c9b.js";import{t as P,e as b}from"./easings.d07c69a5.js";const f=l({heading:t.f32,speed:t.f32}),j=y([f,c,h]),O=D=>{const n=new s(f),o=new s(c),e=new s(h);return i=>{for(const a of j(i)){n.eid=a,o.eid=a,e.eid=a;const{speed:r,heading:d}=n;e.x=r*Math.cos(d),e.y=r*Math.sin(d),o.r=Math.atan2(e.y,e.x)}return i}},m=l({idleDelay:t.f32,turnActive:t.ui8,turnStart:t.f32,turnEnd:t.f32,turnDuration:t.f32,turnElapsed:t.f32,originX:t.f32,originY:t.f32,maxDistance:t.f32}),C=y([m,f,c,h]),Q=D=>{const n=new s(m),o=new s(c),e=new s(f);return i=>{const{deltaSec:a}=i.time;for(const r of C(i)){o.eid=r,n.eid=r,e.eid=r;const{x:d,y:g}=o,{originX:S,originY:A,maxDistance:E}=n,{heading:p}=e;if(n.turnActive){n.turnElapsed+=a,n.turnElapsed>=n.turnDuration&&(n.turnActive=!1,n.idleDelay=Math.random()*2);const{turnStart:u,turnEnd:M,turnDuration:v,turnElapsed:w}=n;e.heading=P(u,M,v,w,b.easeInOutCubic);continue}if(x(d,g,S,A)>E){const u=Math.atan2(0-g,0-d);Math.abs(u-p)>Math.PI/4&&Object.assign(n,{idleDelay:0,turnActive:!0,turnDuration:1,turnElapsed:0,turnStart:p,turnEnd:u});continue}if(!n.turnActive&&(n.idleDelay-=a,n.idleDelay<=0)){Object.assign(n,{turnActive:!0,turnDuration:.5+Math.random()*2,turnElapsed:0,turnStart:p,turnEnd:Math.PI*2*Math.random()});continue}}return i}};export{f as H,m as W,O as h,Q as w};
